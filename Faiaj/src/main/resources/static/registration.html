<!DOCTYPE html>
<html>
<head>

  <title>Student Registration</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 

  <style type="text/css">
    section
    {
      margin-top: -20px;
    }
  </style>   
</head>
<body>

    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand active">ONLINE LIBRARY MANAGEMENT SYSTEM</a>
          </div>
          <ul class="nav navbar-nav">
            <li><a href="index.html">HOME</a></li>
            <li><a href="books.html">BOOKS</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right">

            <li><a href="student_login.html"><span class="glyphicon glyphicon-log-in"> LOGIN</span></a></li>
            <li><a href="student_login.html"><span class="glyphicon glyphicon-log-out"> LOGOUT</span></a></li>
            <li><a href="registration.html"><span class="glyphicon glyphicon-user"> SIGN UP</span></a></li>
          </ul>

      </div>
    </nav>
<section>
  <div class="reg_img">

    <div class="box2">
        <h1 style="text-align: center; font-size: 35px;font-family: Lucida Console;">  Library Management System</h1>
        <h1 style="text-align: center; font-size: 25px;">User Registration Form</h1>
      <form name="Registration" action="" method="">
        
        <div class="login">
          
       
 <input class="form-control" type="text" name="email" placeholder="Email" required="" id="registerEmail"><br>
           <input class="form-control" type="password" name="password" placeholder="Password" required="" id="registerPassword"> <br>
          <input class="form-control" type="password" name="rpassword" placeholder="Repeat Password" required="" id="RepeatedRegisterPassword"> <br>

         

          <input class="btn btn-default" onclick="mainregister();" name="submit" value="Sign Up" style="color: black; width: 80px; height: 30px"> </div>
          <br>
          <div id="registererrorpanel" style="color:white;"></div>
      </form>
     
    </div>
  </div>
</section>
<script>
function mainregister() {
    var model = {

        "email": document.getElementById("registerEmail").value,
        "password": document.getElementById("registerPassword").value,
        "password2": document.getElementById("RepeatedRegisterPassword").value,
    };


    $.ajax({
        type: "POST",
        url: "/admin/addUser",

        ContentType: "application/json ;charset=UTF-8",

        crossOrigin: true,
        dataType: "json",
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
        },
        data: this.JSON.stringify(model),

        success: function(data) {

            console.log(data);
            if (data[0] == "true") {
                console.log("true");
                window.location.href = "index.html";
            } else {
                document.getElementById("registererrorpanel").innerHTML = data[0];

            }



        },
        error: function(jqXHR, testStatus, errorThrown) {
            console.log("error");
        }
    });
}

</script>
</body>
</html>
